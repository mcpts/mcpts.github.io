(function(){"use strict";function d(e,n,t){const r=y(e,s.__wbindgen_malloc),a=f,l=y(n,s.__wbindgen_malloc),c=f,o=y(t,s.__wbindgen_malloc),b=f,i=s.cfb8_decrypt(r,a,l,c,o,b);var _=p(i[0],i[1]).slice();return s.__wbindgen_free(i[0],i[1]*1,1),_}function m(e,n,t){const r=y(e,s.__wbindgen_malloc),a=f,l=y(n,s.__wbindgen_malloc),c=f,o=y(t,s.__wbindgen_malloc),b=f,i=s.cfb8_encrypt(r,a,l,c,o,b);var _=p(i[0],i[1]).slice();return s.__wbindgen_free(i[0],i[1]*1,1),_}function A(){return{__proto__:null,"./mctools_crypto_bg.js":{__proto__:null,__wbindgen_init_externref_table:function(){const n=s.__wbindgen_externrefs,t=n.grow(4);n.set(0,void 0),n.set(t+0,void 0),n.set(t+1,null),n.set(t+2,!0),n.set(t+3,!1)}}}}function p(e,n){return e=e>>>0,g().subarray(e/1,e/1+n)}let u=null;function g(){return(u===null||u.byteLength===0)&&(u=new Uint8Array(s.memory.buffer)),u}function y(e,n){const t=n(e.length*1,1)>>>0;return g().set(e,t/1),f=e.length,t}let f=0,s;function v(e,n){return s=e.exports,u=null,s.__wbindgen_start(),s}async function R(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(a){if(e.ok&&t(e.type)&&e.headers.get("Content-Type")!=="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",a);else throw a}const r=await e.arrayBuffer();return await WebAssembly.instantiate(r,n)}else{const r=await WebAssembly.instantiate(e,n);return r instanceof WebAssembly.Instance?{instance:r,module:e}:r}function t(r){switch(r){case"basic":case"cors":case"default":return!0}return!1}}async function W(e){if(s!==void 0)return s;e!==void 0&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),e===void 0&&(e=new URL("/assets/mctools_crypto_bg-Dx2rPj5b.wasm",self.location.href));const n=A();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await R(await e,n);return v(t)}let w=null;const U=async()=>{w||(w=W().then(()=>{})),await w},M=async e=>{const{id:n,op:t,key:r,iv:a,data:l}=e.data;try{if(await U(),t==="init"){const k={id:n,ok:!0,data:new ArrayBuffer(0)};self.postMessage(k);return}if(!r||!a||!l)throw new Error("Invalid crypto worker payload");const c=new Uint8Array(r),o=new Uint8Array(a),b=new Uint8Array(l),i=t==="encrypt"?m(c,o,b):d(c,o,b),_={id:n,ok:!0,data:i.buffer};self.postMessage(_,[i.buffer])}catch(c){const o={id:n,ok:!1,error:String(c)};self.postMessage(o)}};self.addEventListener("message",e=>{M(e)})})();
//# sourceMappingURL=crypto-worker-FzLZuERe.js.map
